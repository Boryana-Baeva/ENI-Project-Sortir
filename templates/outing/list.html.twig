<!-- Table Outings List -->
<table class="table">
    <thead>
        <tr>
            <th scope="col">Nom de la sortie</th>
            <th scope="col">Date de la sortie</th>
            <th scope="col">Clôture</th>
            <th scope="col">Inscrits/Places</th>
            <th scope="col">Etat</th>
            <th scope="col">Inscrit</th>
            <th scope="col">Organisateur</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for outing in outingList %}
        <tr>
            <th scope="row"><a href="{{ path('outing_details', {id: outing.id}) }}">{{ outing.name }}</a></th>
            <td>{{ outing.startDateTime | date('d/m/Y H:i') }}</td>
            <td>{{ outing.entryDeadline | date('d/m/Y')}}</td>
            <td>{{ outing.participants | length }} / {{ outing.maxNumberEntries }}</td>
            <td>{{ outing.state.label }}</td>
            <td> X </td>
            <td><a href="{{ path('user_profile', {id: outing.organizer.id}) }}">{{ outing.organizer.username }}</a></td>
            <td>
                <a href="{{ path('outing_details', {id: outing.id}) }}">Afficher</a>
                {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                    {% if app.user in outing.participants and outing.startDateTime > date() %}
                        <a href="{{ path('outing_unsubscribe', {id: outing.id}) }}">Se désister</a>
                    {% else %}
                        {% if app.user != outing.organizer and outing.entryDeadline > date() %}
                            <a href="{{ path('outing_subscribe', {id: outing.id}) }}">S'inscrire</a>
                        {% endif %}
                    {% endif %}
                    {% if app.user == outing.organizer %}
                        <a href="{{ path('outing_modify', {id: outing.id}) }}">Modifier</a>
                        {%  if outing.state.label == 'created' %}
                        <a href="#">Publier</a>
                        {% endif %}
                    {% endif %}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<!-- Button Créer une sortie -->
<div id="btn-create" class="btn btn-primary">
    <a href="{{ path('outing_create') }}">Créer une sortie</a>
</div>
